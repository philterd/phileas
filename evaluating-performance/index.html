
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="User guide for Phileas, the open source PII/PHI redaction engine.">
      
      
        <meta name="author" content="philterd">
      
      
        <link rel="canonical" href="https://philterd.github.io/phileas/evaluating-performance/">
      
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>How to Evaluate Phileas' Performance - Phileas</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-evaluate-phileas-performance" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Phileas" class="md-header__button md-logo" aria-label="Phileas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Phileas
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              How to Evaluate Phileas' Performance
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/philterd/phileas" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Phileas" class="md-nav__button md-logo" aria-label="Phileas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Phileas
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/philterd/phileas" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deidentification
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deidentification
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deidentification/bucketing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bucketing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deidentification/date-shifting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Date Shifting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Filter Policies
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Filter Policies
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filter_policies/filter_policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filter Policies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filter_policies/filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filter_policies/filter_strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filter Strategies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filter_policies/ignoring_sensitive_information/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ignoring Sensitive Information
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filter_policies/sample_filter_policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sample Filter Policies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Other Features
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Other Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../other_features/anonymization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Anonymization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../other_features/span_disambiguation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Span Disambiguation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Settings
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#guide-to-evaluating-performance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Guide to Evaluating Performance
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Guide to Evaluating Performance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-you-need" class="md-nav__link">
    <span class="md-ellipsis">
      
        What You Need
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-phileas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuring Phileas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating a Policy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifying-the-filters-you-need" class="md-nav__link">
    <span class="md-ellipsis">
      
        Identifying the Filters You Need
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disabling-filters-we-do-not-need" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disabling Filters We Do Not Need
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-filters-not-in-the-default-policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enabling Filters Not in the Default Policy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submitting-text-for-redaction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Submitting Text for Redaction
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calculating-precision-and-recall" class="md-nav__link">
    <span class="md-ellipsis">
      
        Calculating Precision and Recall
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="how-to-evaluate-phileas-performance">How to Evaluate Phileas' Performance</h1>
<p>A common question we receive is how well does Phileas perform? Our answer to this question is probably less than satisfactory because it simply depends. What does it depend on? Phileas' performance is heavily dependent upon your individual data. Sharing to compare metrics of Phileas' performance between different customer datasets is like comparing apples and oranges.</p>
<p>If your data is not exactly like another customer's data then the metrics will not be applicable to your data. In terms of the classic information retrieval metrics precision and recall, comparing these values between customers can give false impressions about Phileas' performance, both good and bad.</p>
<blockquote>
<p>This guide walks you through how to evaluate Phileas' performance. If you are just getting started with Phileas please see the Quick Starts instead. Then you can come back here to learn how to evaluate Phileas' performance.</p>
</blockquote>
<h2 id="guide-to-evaluating-performance">Guide to Evaluating Performance</h2>
<p>We have created this guide to help guide you in evaluating Phileas' performance on your data. The guide involves determining the types of sensitive information you want to redact, configuring those filters, optimizing the configuration, and then capturing the performance metrics.</p>
<blockquote>
<p>If you are using Philter we will gladly perform these steps for you and provide you a detailed Phileas performance report generated from your data. Please contact us to start the process.</p>
</blockquote>
<h4 id="what-you-need">What You Need</h4>
<p>To evaluate Phileas' performance you need:</p>
<ul>
<li>An application using Phileas.</li>
<li>A list of the types of sensitive information you want to redact.</li>
<li>A data set representative of the text you will be redacting using Phileas. It's important the data set be representative so the evaluation results will transfer to the actual data redaction.</li>
<li>The same data set but with annotated sensitive information. These annotations will be used to calculate the precision and recall metrics.</li>
</ul>
<h4 id="configuring-phileas">Configuring Phileas</h4>
<p>Before we can begin our evaluation we need to create a policy. A <a href="policies_README.md">policy</a> is a file that defines the types of sensitive information that will be redacted and how it will be redacted. The policies are stored on the Phileas instance under <code>/opt/Phileas/policies</code>. You can edit the policies directly there using a text editor or you can use Phileas' <a href="policies-api.md">API</a> to upload a policy. In this case we recommend just using a text editor on the Phileas instance to create a policy.</p>
<p>When using a text editor to create and edit a policy, be sure to save the policy often. Frequent saving can make editing a policy easier.</p>
<p>We also recommend considering to place your policy directory under source control to have a history and change log of your policies.</p>
<h4 id="creating-a-policy">Creating a Policy</h4>
<p>Make a copy of the default policy, and we will modify the copy for our needs.</p>
<p><code>cp /opt/Phileas/policies/default.json /opt/Phileas/policies/evaluation.json</code></p>
<p>Now open <code>/opt/Phileas/policies/evaluation.json</code> in a text editor. (The content of <code>evaluation.json</code> will be similar to what's shown below but may have minor differences between different versions of Phileas.)</p>
<pre><code>{
   &quot;name&quot;: &quot;default&quot;,
   &quot;identifiers&quot;: {
      &quot;emailAddress&quot;: {
         &quot;emailAddressFilterStrategies&quot;: [
            {
               &quot;strategy&quot;: &quot;REDACT&quot;,
               &quot;redactionFormat&quot;: &quot;{{{REDACTED-%t}}}&quot;
            }
         ]
      },
      &quot;phoneNumber&quot;: {
         &quot;phoneNumberFilterStrategies&quot;: [
            {
               &quot;strategy&quot;: &quot;REDACT&quot;,
               &quot;redactionFormat&quot;: &quot;{{{REDACTED-%t}}}&quot;
            }
         ]
      }
   }
}
</code></pre>
<p>The first thing we need to do is to set the name of the policy. Replace <code>default</code> with <code>evaluation</code> and save the file.</p>
<h4 id="identifying-the-filters-you-need">Identifying the Filters You Need</h4>
<p>The rest of the file contains the filters that are enabled in the default policy. We need to make sure that each type of sensitive information that you want to redact is represented by a filter in this file. Look through the rest of the policy and determine which filters are listed that you do not need and also which filters you do need that are not listed.</p>
<h4 id="disabling-filters-we-do-not-need">Disabling Filters We Do Not Need</h4>
<p>If a filter is listed in the policy and you do not need the filter you have two options. You can either delete those lines from the policy and save the file, or you can set the filter's <code>enabled</code> property to false. Using the <code>enabled</code> property allows you to keep the filter configuration in the policy in case it is needed later but both options have the same effect.</p>
<h4 id="enabling-filters-not-in-the-default-policy">Enabling Filters Not in the Default Policy</h4>
<p>Let's say you want to redact bitcoin addresses. The bitcoin address filter is not in the default policy. To add the bitcoin address filter we will refer to Phileas' documentation on the bitcoin address filter, get the configuration, and copy it into the policy.</p>
<p>From the <a href="bitcoin-addresses.md">bitcoin address filter documentation</a> we see the configuration for the bitcoin address filter is:</p>
<pre><code>      &quot;bitcoinAddress&quot;: {
         &quot;bitcoinAddressFilterStrategies&quot;: [
            {
               &quot;strategy&quot;: &quot;REDACT&quot;,
               &quot;redactionFormat&quot;: &quot;{{{REDACTED-%t}}}&quot;
            }
         ]
      }
</code></pre>
<p>We can copy this configuration and paste it into our policy:</p>
<pre><code>{
   &quot;name&quot;: &quot;evaluation&quot;,
   &quot;identifiers&quot;: {
      &quot;bitcoinAddress&quot;: {
         &quot;bitcoinAddressFilterStrategies&quot;: [
            {
               &quot;strategy&quot;: &quot;REDACT&quot;,
               &quot;redactionFormat&quot;: &quot;{{{REDACTED-%t}}}&quot;
            }
         ]
      },
      &quot;emailAddress&quot;: {
         &quot;emailAddressFilterStrategies&quot;: [
            {
               &quot;strategy&quot;: &quot;REDACT&quot;,
               &quot;redactionFormat&quot;: &quot;{{{REDACTED-%t}}}&quot;
            }
         ]
      },
      &quot;phoneNumber&quot;: {
         &quot;phoneNumberFilterStrategies&quot;: [
            {
               &quot;strategy&quot;: &quot;REDACT&quot;,
               &quot;redactionFormat&quot;: &quot;{{{REDACTED-%t}}}&quot;
            }
         ]
      }
   }
}
</code></pre>
<p>The order of the filters in the policy does not matter and has no impact on performance. We typically place the filters in the policy alphabetically just to improve readability.</p>
<p>Repeat these steps until you have added a filter for each of the types of sensitive information you want to redact. Typically, the default redaction <code>strategy</code> and <code>redactionFormat</code> values for each filter should be fine for evaluation.</p>
<p>When finished modifying the policy, save the file and close the text editor. Now restart Phileas for the policy changes to be loaded:</p>
<pre><code>sudo systemctl restart Phileas
</code></pre>
<h4 id="submitting-text-for-redaction">Submitting Text for Redaction</h4>
<p>With our policy in place we can now send text to Phileas for redaction using that policy:</p>
<pre><code>PhileasConfiguration phileasConfiguration = ConfigFactory.create(PhileasConfiguration.class);

FilterService filterService = new PhileasFilterService(phileasConfiguration);

FilterResponse response = filterService.filter(policies, context, body, MimeType.TEXT_PLAIN);
</code></pre>
<p>The <code>explain</code> API <a href="filtering-api.md#explain">endpoint</a> produces a detailed description of the redaction. The response will include a list of spans that contain the start and stop positions of redacted text and the type of sensitive information that was redacted. Using this information we can compare the redacted information to our annotated file to calculate precision and recall metrics.</p>
<h4 id="calculating-precision-and-recall">Calculating Precision and Recall</h4>
<p>Now we can calculate the precision and recall metrics.</p>
<ul>
<li>Precision is the number of true positives divided by the number true positives plus false positives.</li>
<li>Recall is the number of true positives divided by the number of false negatives plus true positives.</li>
</ul>
<p><img alt="Calculating the precision and recall" src="Images/precision.png" /></p>
<ul>
<li>The F-1 score is the harmonic mean of precision and recall.</li>
</ul>
<p><img alt="Calculating the F-1 score" src="Images/f1.png" /></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright 2024 Philterd, LLC
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": [], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>